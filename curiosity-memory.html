<!DOCTYPE html>
<html>
	<head>
		<title>Effect of Curiosity on Memory Experiment</title>
		<script src="https://unpkg.com/jspsych@7.3.1"></script>
		<script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-survey@0.2.1"></script>
		<script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.2"></script>
		<link
			href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css"
			rel="stylesheet"
			type="text/css" />
		<link href="styles.css" rel="stylesheet" type="text/css" />
		<link
			rel="stylesheet"
			href="https://unpkg.com/@jspsych/plugin-survey@0.2.1/css/survey.css"
			type="text/css" />
	</head>
	<body></body>
	<script>
		/* initialize jsPsych */
		var jsPsych = initJsPsych({
			on_finish: function () {
				jsPsych.data.displayData();
			},
		});

		/* media preload */
		var preload = {
			type: jsPsychPreload,
			images: fractals,
		};

		/* global vars */
		var timeline = [];
		//var test_stimuli = [{stimulus: "img/1.png"}, {stimulus: "img/2.png"}];

		var trivia_questions = [
			{question: "What year was the very first model of the iPhone released?", answer: "2007"},
			{question: "How many single hand gestures, or mudras, are used in Indian classical dance?", answer: "28"},
			{question: "How many books has Stephen King published?", answer: "65"},
			{question: "What is the diameter of Earth in miles?", answer: "7917.5"},
			{question: "How many tones are in the Vietnamese language?", answer: "6"},
			{question: "What year did the Berlin Wall fall?", answer:"1989"},
			{question: "How many times a day do Muslims pray?", answer: "5"},
			{question: "How many countries are in Africa?", answer:"54"},
			{question: "How much is in a Baker's Dozen?", answer:"13"},
			{question: "How many double stitches does a baseball have?", answer:"108"},
			{question: "How many constellations are there?",answer:"88"},
			{question: "In what year was the Mexican artist Frida Kahlo born?", answer:"1907"},
			{question: "How long is the Great Wall of China (in miles)?", answer:"13,171"},
			{question: "How many bones is a human baby born with?", answer:"300"},
			{question: "How many countries in Africa have French as the official language?", answer:"21"},
			{question: "What year did the titanic sink?", answer:"1912"},
			{question: "How many books are in the Catholic Bible?", answer:"73"},
			{question: "How many main islands make up Japan?", answer:"4"},
			{question: "How many people are vegan globally (in millions)?", answer:"79"},
			{question: "In what year did the first Modern Olympic Games take place?", answer:"1896"},
			{question: "How many moons does Neptune have?", answer:"14"},
			{question: "How many lines are in a sonnet?", answer:"14"},
			{question: "In what year was the first Nobel Prize awarded?", answer:"1901"},
			{question: "How many native species of kangaroos are found in Australia?", answer:"4"},
			{question: "How many floors are in the Burj Khalifa, the tallest building in the world?", answer:"163"},
			{question: "How old was King Tut when he died?", answer:"19"},
			{question: "A bar mitzvah is traditionally celebrated when Jewish males turn what age?", answer:"13"},
			{question: "How many countries have territory in the Arctic Circle?", answer:"8"},
			{question: "How many different animals (real or imaginary) are represented in the Chinese calendar?", answer:"12"},
			{question: "How many soccer players should each team have on the field at the start of each match?", answer:"11"}
		];
		var randomized_trivia_questions = jsPsych.randomization.repeat(trivia_questions,1);

		var fractals = [
			{fractal: 'img/1.png'}, 
			{fractal: 'img/2.png'}, 
			{fractal: 'img/3.png'}, 
			{fractal: 'img/4.png'}, 
			{fractal: 'img/5.png'}, 
			{fractal: 'img/6.png'}, 
			{fractal: 'img/7.png'}, 
			{fractal: 'img/8.png'}, 
			{fractal: 'img/9.png'}, 
			{fractal: 'img/10.png'}, 
			{fractal: 'img/11.png'}, 
			{fractal: 'img/12.png'}, 
			{fractal: 'img/13.png'}, 
			{fractal: 'img/14.png'}, 
			{fractal: 'img/15.png'}, 
			{fractal: 'img/16.png'}, 
			{fractal: 'img/17.png'}, 
			{fractal: 'img/18.png'}, 
			{fractal: 'img/19.png'}, 
			{fractal: 'img/20.png'}, 
			{fractal: 'img/21.png'}, 
			{fractal: 'img/22.png'}, 
			{fractal: 'img/23.png'}, 
			{fractal: 'img/24.png'}, 
			{fractal: 'img/25.png'}, 
			{fractal: 'img/26.png'}, 
			{fractal: 'img/27.png'}, 
			{fractal: 'img/28.png'}, 
			{fractal: 'img/29.png'},
			{fractal: 'img/30.png'}
		];
		var randomized_fractals = jsPsych.randomization.repeat(fractals,1);

		var randomized_trial_stimuli = [];

		for(let i = 0; i < randomized_trivia_questions.length; i++){
			let question = randomized_trivia_questions[i].question;
			let answer = randomized_trivia_questions[i].answer;
			let fractal = randomized_fractals[i].fractal;
			randomized_trial_stimuli.push({question: question, answer: answer, fractal: fractal});
		}
		/* practice trials */

		/* present the instructions*/
		var instruction = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p>Welcome and thank you for participating in this study!</p>
			<p>In each trial, you will be given a trivia question and then be asked to:</p>
			<p>1) Predict the answer</p>
			<p>2) Rate your prior knowledge on the topic (1 - 7)</p>
			<p>3) How much do you want to know the answer (1 - 7)</p>
			<p></p>
			<p>Then, the card will flip over, and you will see the answer</p>
			<p></p>
			<p>Let's try a practice round. Press any key to move to the next slide</p>
			`,
		};

		var practice_1 = {
			type: jsPsychSurveyText,
			preamble: `
			<h3><strong><em>PRACTICE TRIAL</em></strong></h3>
			<h2><strong>How many legs does a lobster have?</strong></h2>`,
			questions: [{prompt: "Predict the answer (type a number)"}],
			css_classes: ["card_container"],
			data:{
				task: 'practice'
			}
		};

		var practice_2 = {
			type: jsPsychSurvey,
			title: "How many legs does a lobster have?",
			css_classes: ["card_container"],
			pages: [
				[
					{
						type: "likert",
						prompt: "How much do you know about this topic on a scale of 1-7",
						name: 'practice',
						likert_scale_min_label: "Nothing At All",
						likert_scale_max_label: "A lot",
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						]
					},
				],
				[
					{
						type: "likert",
						prompt: "How much do you want to know the answer on a scale of 1-7",
						name: 'practice',
						likert_scale_min_label: "Nothing At All",
						likert_scale_max_label: "Super",
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						]
					},
				],
			],
		};

		var practice_answer = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p><strong>How many legs does a lobster have?</strong></p>
			<p></p>
			<p>Answer: 10</p>
			`,
			data:{
				task: 'practice'
			}
		};

		var practice_end = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p>The practice round is over</p>
			<p>Press any key to continue to the actual trials</p>
			<p>Good Luck!</p>
			`,
		};

		var prediction = {
			type: jsPsychSurveyText,
			preamble: function (){
				var stim = '<h1>TRIAL 1\n</h1>' + jsPsych.timelineVariable('question') + '</p>';
                return stim
			},
			questions: [
				{
					prompt: "Type your prediction below (numbers only!)",
					name: "Prediction",
				},
			]
		};

		var prior_knowledge_and_curiosty = {
			type: jsPsychSurvey,
			title: function (){
				var stim = jsPsych.timelineVariable('question');
                return stim
			},
			pages: [
				[
					{
						type: "likert",
						name: "prior knowledge",
						prompt: "How much do you know about this topic?",
						likert_scale_min_label: "Nothing at all",
						likert_scale_max_label: "A lot!",
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
					},
				],
				[
					{
						type: "likert",
						name: "curiosity",
						prompt: "How much do you want to know the answer?",
						likert_scale_min_label: "I couldn't care less",
						likert_scale_max_label: "I am DYING to know!",
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
					},
				],
			],
		};
		
		var loading_screen = {
			type: jsPsychImageKeyboardResponse,
			stimulus: function (){
				var stim = jsPsych.timelineVariable('fractal');
                return stim
			},
			choices: "NO_KEYS",
			trial_duration: 2000,
		};

		var answer = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: function() {
				var stim = jsPsych.timelineVariable('question') + '<p>' + jsPsych.timelineVariable('answer')
				return stim
			},
			choices: "NO_KEYS",
			trial_duration: 3000,
		}

		/* trials */
		var trials = {
			timeline:[prediction, prior_knowledge_and_curiosty,loading_screen, answer],
			timeline_variables: randomized_trial_stimuli
		}

		

		/* push everything to timeline */
		timeline.push(preload);
		timeline.push(instruction);
		timeline.push(practice_1);
		timeline.push(practice_2);
		timeline.push(practice_answer);
		timeline.push(practice_end);
		timeline.push(trials);

		/* start the experiment */
		jsPsych.run(timeline);
	</script>
</html>
