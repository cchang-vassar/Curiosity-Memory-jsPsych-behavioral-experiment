<!DOCTYPE html>
<html>
	<head>
		<title>Effect of Curiosity on Memory Experiment</title>
		<script src="https://unpkg.com/jspsych@7.3.1"></script>
		<script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.2"></script>
		<script src="https://unpkg.com/@jspsych/plugin-survey@0.2.1"></script>
		<script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.2"></script>
		<link
			href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css"
			rel="stylesheet"
			type="text/css" />
		<link href="styles.css" rel="stylesheet" type="text/css" />
		<link
			rel="stylesheet"
			href="https://unpkg.com/@jspsych/plugin-survey@0.2.1/css/survey.css"
			type="text/css" />
	</head>
	<body></body>
	<script>
		/* initialize jsPsych */
		var jsPsych = initJsPsych({
			on_finish: function () {
				jsPsych.data.displayData();
			},
		});

		/* media preload */
		var preload = {
			type: jsPsychPreload,
			images: ["img/1.png", "img/2.png"],
		};

		/* global vars */
		var timeline = [];
		var test_stimuli = [{stimulus: "img/1.png"}, {stimulus: "img/2.png"}];
		const PREDICTION_PROMPT =
			"Type your prediction of the answer below (numbers only!)";
		const PRIOR_KNOWLEDGE_PROMPT = "How much do you know about this topic?";
		const CURIOSITY_PROMPT =
			"How much do you want to know the answer to this question?";
		const PRIOR_KNOWLEDGE_LIKERT_MIN = "Nothing at all";
		const PRIOR_KNOWLEDGE_LIKERT_MAX = "LIKE, A LOT";
		const CURIOSITY_LIKERT_MIN = "I don't care";
		const CURIOSITY_LIKERT_MAX = "TELL ME!";

		/* practice trials */

		/* present the instructions*/
		var instruction = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p>Welcome and thank you for participating in this study!</p>
			<p>In each trial, you will be given a trivia question and then be asked to:</p>
			<p>1) Predict the answer</p>
			<p>2) Rate your prior knowledge on the topic (1 - 7)</p>
			<p>3) How much do you want to know the answer (1 - 7)</p>
			<p></p>
			<p>Then, the card will flip over, and you will see the answer</p>
			<p></p>
			<p>Let's try a practice round. Press any key to move to the next slide</p>
			`,
		};

		var practice_prediction = {
			type: jsPsychSurveyText,
			preamble: `
			<h3><strong><em>PRACTICE TRIAL</em></strong></h3>
			<h2><strong>How many legs does a lobster have?</strong></h2>`,
			questions: [{prompt: PREDICTION_PROMPT}],
			css_classes: ["card_container"],
			data: {
				task: "practice",
			},
		};

		var practice_likert = {
			type: jsPsychSurvey,
			on_load: () => {
				document.querySelector(".card_container").insertAdjacentHTML(
					"afterbegin",
					`
					<div>
					<h3>
						<strong>
							<em>PRACTICE TRIAL</em>
						</strong>
					</h3>
					</div>
				`
				);
			},
			title: "How many legs does a lobster have?",
			css_classes: ["card_container"],
			pages: [
				[
					{
						type: "likert",
						prompt: PRIOR_KNOWLEDGE_PROMPT,
						likert_scale_min_label: PRIOR_KNOWLEDGE_LIKERT_MIN,
						likert_scale_max_label: PRIOR_KNOWLEDGE_LIKERT_MAX,
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
						data: {
							task: "practice",
						},
					},
				],
				[
					{
						type: "likert",
						prompt: CURIOSITY_PROMPT,
						likert_scale_min_label: CURIOSITY_LIKERT_MIN,
						likert_scale_max_label: CURIOSITY_LIKERT_MAX,
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
						data: {
							task: "practice",
						},
					},
				],
			],
		};

		var practice_answer = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p><strong>How many legs does a lobster have?</strong></p>
			<p></p>
			<p>Answer: 10</p>
			`,
		};

		var practice_end = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p>The practice round is over</p>
			<p>Press any key to continue to the actual trials</p>
			<p>Good Luck!</p>
			`,
		};

		/* trials */
		var title_card = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<h1><strong>TRIAL 1</strong></h1>
			`,
		};

		var trial_prediction = {
			type: jsPsychSurveyText,
			on_load: () => {
				document.querySelector(".card_container").insertAdjacentHTML(
					"afterbegin",
					`
					<div>
					<h3>
						<strong>
							<em>TRIAl 1</em>
						</strong>
					</h3>
					</div>
				`
				);
			},
			preamble: `
			<h2>What year was the very first model<br> of the iPhone released?</h2>
			`,
			questions: [
				{
					prompt: PREDICTION_PROMPT,
					name: "Prediction",
				},
			],
			css_classes: ["card_container"],
		};

		var trial_likert = {
			type: jsPsychSurvey,
			title: "What year was the very first model\n of the iPhone released?",
			css_classes: ["card_container"],
			on_load: () => {
				document.querySelector(".card_container").insertAdjacentHTML(
					"afterbegin",
					`
					<div>
					<h3>
						<strong>
							<em>TRIAL 1</em>
						</strong>
					</h3>
					</div>
				`
				);
			},
			pages: [
				[
					{
						type: "likert",
						name: "prior knowledge",
						prompt: PRIOR_KNOWLEDGE_PROMPT,
						likert_scale_min_label: PRIOR_KNOWLEDGE_LIKERT_MIN,
						likert_scale_max_label: PRIOR_KNOWLEDGE_LIKERT_MAX,
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
						data: {
							task: "prior knowledge",
						},
					},
				],
				[
					{
						type: "likert",
						name: "curiosity",
						prompt: CURIOSITY_PROMPT,
						likert_scale_min_label: CURIOSITY_LIKERT_MIN,
						likert_scale_max_label: CURIOSITY_LIKERT_MAX,
						likert_scale_values: [
							{value: 0},
							{value: 1},
							{value: 2},
							{value: 3},
							{value: 4},
							{value: 5},
						],
						data: {
							task: "curiosity",
						},
					},
				],
			],
		};

		var loading_screen = {
			type: jsPsychImageKeyboardResponse,
			stimulus: "img/1.png",
			choices: "NO_KEYS",
			trial_duration: 2000,
		};

		var trial_answer = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p><strong>What year was the very first model of the iPhone released?</strong></p>
			<p></p>
			<p>Answer: 2007</p>
			`,
		};

		var trial_end = {
			type: jsPsychHtmlKeyboardResponse,
			stimulus: `
			<p>Trial 1 is over</p>
			<p>Press any key to continue to the actual trials</p>
			`,
		};

		/* push everything to timeline */
		timeline.push(preload);
		timeline.push(instruction);
		timeline.push(practice_prediction);
		timeline.push(practice_likert);
		timeline.push(practice_answer);
		timeline.push(practice_end);
		timeline.push(title_card);
		timeline.push(trial_prediction);
		timeline.push(trial_likert);
		timeline.push(loading_screen);
		timeline.push(trial_answer);
		timeline.push(trial_end);

		/* start the experiment */
		jsPsych.run(timeline);
	</script>
</html>
